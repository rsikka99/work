<div id="alertMessage" class="" style="display:none"></div>
<h2 class="text-center">Device Management</h2>
<div class="row-fluid">
    <form class="form-horizontal form-center-actions" style="overflow:hidden;">
        <!--        <img class="pull-left" style="padding-right:5px" src="http://placehold.it/100x100" />-->
        <div class="control group">
            <label for="manufacturerId" class="control-label">Manufacturer</label>

            <div class="controls">
                <select class="input-large" id="manufacturerId" name="manufacturerId" <?php echo(!$this->isAllowed ? 'disabled="disabled"' : "") ?>>
                    <?php
                    foreach ($this->manufacturers as $manufacturer)
                    {
                        ?>
                        <option value="<?php echo $manufacturer->id; ?>" <?php echo($this->manufacturerId == $manufacturer->id ? "selected=selected" : "") ?> ><?php echo $manufacturer->fullname; ?></option>
                    <?php
                    }
                    ?>
                </select
            </div>
        </div>
        <div class="control group">
            <label for="modelName" class="control-label">Model Name</label>

            <div class="controls">
                <input type="text" class="input-large" id="modelName" value="<?php echo $this->modelName; ?>" name="modelName" <?php echo(!$this->isAllowed ? 'disabled="disabled"' : "") ?>>
            </div>
        </div>
    </form>
</div>
<ul class="nav nav-tabs">
    <?php $first = true; ?>
    <?php if ($this->suppliesAndService)
    {
        ?>
    <li <?php if ($first)
    {
        echo 'class="active"';
        $first = false;
    } ?>><a href="#suppliesAndServiceTab" id="suppliesAndServiceTopTab" data-toggle="tab">Supplies &amp; Service</a></li><?php } ?>
    <?php if ($this->deviceAttributes)
    {
        ?>
    <li <?php if ($first)
    {
        echo 'class="active"';
        $first = false;
    } ?>><a href="#deviceAttributesTab" id="deviceAttributesTopTab" data-toggle="tab">Device Attributes</a></li><?php } ?>
    <?php if ($this->hardwareOptimization)
    {
        ?>
    <li <?php if ($first)
    {
        echo 'class="active"';
        $first = false;
    } ?>><a href="#hardwareQuoteTab" id="hardwareQuoteTopTab" data-toggle="tab">Hardware Quote</a></li><?php } ?>
    <?php if ($this->availableOptions)
    {
        ?>
    <li <?php if ($first)
    {
        echo 'class="active"';
        $first = false;
    } ?>><a href="#hardwareOptimizationTab" id="hardwareOptimizationTopTab" data-toggle="tab">Hardware Optimization</a></li><?php } ?>
    <?php if ($this->hardwareQuote)
    {
        ?>
    <li <?php if ($first)
    {
        echo 'class="active"';
        $first = false;
    } ?>><a href="#availableOptionsTab" id="availableOptionsTopTab" data-toggle="tab">Available Options</a></li><?php } ?>
    <?php if ($this->hardwareConfigurations)
    {
        ?>
    <li <?php if ($first)
    {
        echo 'class="active"';
        $first = false;
    } ?>><a href="#hardwareConfigurationsTab" id="hardwareConfigurationsTopTab" data-toggle="tab">Hardware Configurations</a></li><?php } ?>
</ul>
<div class="tabbable">
<div class="tab-content">
<?php $first = true;
if ($this->suppliesAndService)
{
    ?>
    <div class="tab-pane <?php if ($first)
    {
        echo ' active ';
        $first = false;
    } ?>" id="suppliesAndServiceTab">
        <div class="row-fluid">
            <form id="suppliesAndService" class="form-horizontal form-center-actions">
                <?php echo $this->suppliesAndService; ?>
            </form>
        </div>


        <div class="clearfix" style="padding-right:8px">
            <h3 style="text-align: center">Assigned Toners</h3>

            <div class="pull-left">
                <div id="assignedTonerMistakeParent2" class="control-group">
                    <div id="assignedTonerMistakeParent1" class="control-group">
                        <div id="assignedTonersMistakes"></div>
                    </div>
                </div>
            </div>
            <?php if ($this->isAllowed)
            {
                ?>
                <input type="button" value="Assign Toners" id="btnAssignToner" class="btn btn-success pull-right" style="margin:auto;margin-bottom: 10px" onclick="javascript: showAssignTonersModal()" />
            <?php } ?>
        </div>

        <table id="assignedToners"></table>
        <div id="assignedTonersPager"></div>

        <div class="modal hide masterDeviceModal" id="assignTonersModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">x</a>

                <h3 class="text-center">Available Toners</h3>
            </div>
            <div class="modal-body">
                <div class="span form-horizontal">
                    <div id="availableToners_criteria_container" style="display: inline; padding: 0px 0px 0px 0px;">
                        Manufacturer:
                        <input id="availableTonersSelectManufacturer" type="text" name="availableTonersSelectManufacturer" class="input-large" />
                        <input type="button" value="Reset" class="btn btn-mini btn-inverse" id='availableTonersClearManSearch' style="margin-left:4px" />
                        Filter:
                        <select id="availableTonersFilter" name="filterList" class="input-large" style="margin:0px 0px 0px 0px">
                            <option value="dealerSku">Your SKU</option>
                            <option value="sku">MFG. Part #</option>
                            <option value="tonerColorId">Color</option>
                        </select>
                        <input type="text" id="availableTonersCriteria" class="input-medium" style="margin:0px 0px 0px 0px" />
                        <select id="availableTonersCriteriaList" name="availableTonersCriteriaList" class="input-medium" style="display:none;" >
                            <?php
                            foreach ($this->tonerColors as $tonerColor)
                            {
                              ?><option value="<?php echo $tonerColor->tonerColorId; ?>"><?php echo $tonerColor->tonerColorName; ?></option>
                            <?php
                            }
                            ?>
                        </select>
                        <input id="availableTonersSearch" type="button" value="Search" class="btn btn-mini btn-success" />
                        <input id="availableTonersReset" type="button" value="Reset" class="btn btn-mini btn-inverse" />
                    </div>
                    <table id="availableToners"></table>
                    <div id="availableToners_Pager"></div>
                    <div style="text-align: center">
                        <input type="button" class="btn" value="Close" data-dismiss='modal' " />
                    </div>
                </div>
            </div>
        </div>
        <div class="modal hide" id="availableTonersModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">x</a>

                <h3 style="text-align: center"><span id="availableTonersTitle"></span></h3>
            </div>
            <div class="modal-body">
                <div class="span6 form-horizontal">
                    <form id="availableTonersForm" class="form-horizontal form-center-actions">
                        <?php echo $this->availableTonersForm; ?>
                    </form>
                    <div style="text-align: center">
                        <input type="button" class="btn btn-primary" value="Save" id="availableTonerseFormBtn" onclick="javascript: createOrEdit('availableTonersForm');" />
                        <input type="button" class="btn" value="Cancel" data-dismiss='modal' " />
                    </div>
                </div>
            </div>
        </div>
        <div class="modal hide masterDeviceModal" id="replacementTonersModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">x</a>

                <h3 style="text-align: center"><span id="aTitle"></span></h3>
            </div>
            <div class="modal-body">
                <h3 class="text-center">Affected Devices</h3>

                <div class="form-horizontal">
                    <span id="affectedDevicesText"></span>
                    <table id="affectedReplacementToners"></table>
                    <div id="affectedReplacementToners_Pager"></div>
                    <h3 id="selectReplacementText" class="text-center"></h3>

                    <div id="replacementToners_criteria_container" style="display: inline; padding: 0px 0px 0px 0px;">
                        Manufacturer:
                        <input id="replacementTonersSelectManufacturer" type="text" name="replacementTonersSelectManufacturer" class="input-large" />
                        <input type="button" value="Reset" class="btn btn-mini btn-inverse" id='replacementTonersClearManSearch' style="margin-left:4px" />
                        Filter:
                        <select id="replacementTonersFilter" name="filterList" class="input-large" style="margin:0px 0px 0px 0px">
                            <option value="dealerSku">Your SKU</option>
                            <option value="sku">MFG. Part #</option>
                        </select>
                        <input type="text" id="replacementTonersCriteria" class="input-medium" style="margin:0px 0px 0px 0px" />
                        <input id="replacementTonersSearch" type="button" value="Search" class="btn btn-mini btn-success" />
                        <input id="replacementTonersReset" type="button" value="Reset" class="btn btn-mini btn-inverse" />
                    </div>
                    <table id="replacementToners"></table>
                    <div id="replacementToners_Pager"></div>
                    <div style="text-align: center">
                        <span class="text-center">Apply to all devices using this toner?</span>
                        </br>
                        <div class="switch" data-on-label="Yes" data-off-label="No" data-off="danger" data-on="success">
                            <input type="checkbox" id="replacementTonersApplyToAll" />
                        </div>
                    </div>
                    <br />

                    <div style="text-align: center">
                        <input type="button" class="btn btn-primary" value="Save" id="replacementTonersFormBtn" onclick="javascript: replaceToner();" />
                        <input type="button" class="btn" value="Cancel" data-dismiss='modal' " />
                    </div>
                    <input type="hidden" id="replacementTonersTotalCount" />
                    <input type="hidden" id="replacementTonersDeviceCount" />
                </div>
            </div>
        </div>
    </div>
<?php
}
if ($this->deviceAttributes)
{
    ?>
    <div class="tab-pane <?php if ($first)
    {
        echo ' active ';
        $first = false;
    } ?>" id="deviceAttributesTab">
        <div class="row-fluid">
            <form id="deviceAttributes" class="form-horizontal form-center-actions">
                <?php echo $this->deviceAttributes; ?>
            </form>
        </div>
    </div>
<?php
}
if ($this->hardwareOptimization)
{
    ?>
    <div class="tab-pane <?php if ($first)
    {
        echo ' active ';
        $first = false;
    } ?>" id="hardwareOptimizationTab">
        <div class="row-fluid">
            <form id="hardwareOptimization" class="form-horizontal form-center-actions">
                <?php echo $this->hardwareOptimization; ?>
            </form>
        </div>
    </div>
<?php
}
if ($this->hardwareQuote)
{
    ?>
    <div class="tab-pane <?php if ($first)
    {
        echo ' active ';
        $first = false;
    } ?>" id="hardwareQuoteTab">
        <div class="row-fluid">
            <form id="hardwareQuote" class="form-horizontal form-center-actions">
                <?php echo $this->hardwareQuote; ?>
            </form>
        </div>
    </div>
<?php
}
if ($this->availableOptions)
{
    ?>
    <div class="tab-pane <?php if ($first)
    {
        echo ' active ';
        $first = false;
    } ?>" id="availableOptionsTab">
        <div id="criteria_availableOptionsContainer" style="display: inline; padding: 0px 0px 0px 0px;">
            Filter:
            <select id="optionFilterList" name="filterList" class="input-large" style="margin:0px 0px 0px 0px">
                <option value="oemSku">OEM Sku</option>
                <option value="dealerSku">Dealer Sku</option>
                <option value="option">Option</option>
                <option value="description">Description</option>
            </select>
            <input type="text" class="input-medium" id="optionCriteria" style="margin:0px 0px 0px 0px" />
            <input type="button" value="Search" id="availableOptionsSearch" class="btn btn-mini btn-success" onclick="javascript: reloadAvailableOptions();" />
            <input type="button" value="Reset" class="btn btn-mini btn-inverse" onclick="javascript: clearAvailableOptions();" />
        </div>
        <table id="availableOptions"></table>
        <div id="availableOptions_Pager"></div>
        <div class="modal hide" id="availableOptionsModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">x</a>

                <h3 style="text-align: center"><span id="availableOptionsTitle"></span></h3>
            </div>
            <div class="modal-body">
                <div class="span6 form-horizontal">
                    <form id="availableOptionsForm" class="form-horizontal form-center-actions">
                        <?php echo $this->availableOptionsForm; ?>
                    </form>
                    <div style="text-align: center">
                        <input type="button" class="btn btn-primary" value="Save" id="availableOptionsFormBtn" onclick="javascript: createOrEdit('availableOptionsForm');" />
                        <input type="button" class="btn" value="Cancel" data-dismiss='modal' " />
                    </div>
                </div>
            </div>
        </div>
    </div>
<?php
}
if ($this->hardwareConfigurations)
{
    ?>
    <div class="tab-pane <?php if ($first)
    {
        echo ' active ';
        $first = false;
    } ?>" id="hardwareConfigurationsTab">
        <table id="hardwareConfigurations"></table>
        <div id="hardwareConfigurations_Pager"></div>
        <div class="modal hide" id="hardwareConfigurationsModal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">x</a>

                <h3 style="text-align: center"><span id="hardwareConfigurationsTitle"></span></h3>
            </div>
            <div class="modal-body">
                <div class="span6 form-horizontal">
                    <form id="hardwareConfigurationsForm" class="form-horizontal form-center-actions">
                    </form>
                    <div style="text-align: center">
                        <input type="button" class="btn btn-primary" value="Save" id="hardwareConfigurationFormBtn" onclick="javascript: createOrEdit('hardwareConfigurationsForm');" />
                        <input type="button" class="btn" value="Cancel" data-dismiss='modal' " />
                    </div>
                </div>
            </div>
        </div>
        <div class="modal hide" id="deleteModal">
            <div class="modal-body">
                <div class="span6">
                    <div class="text-center">
                    <form id="deleteForm" class="form-horizontal form-center-actions">
                        <?php echo $this->delete; ?>
                    </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
<?php
}
?>
<div class="modal hide" id="alertMessageModal">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">x</a>
        <h4 style="text-align: center">Please select a row</h4>
    </div>
    <div class="modal-body">
        <div class="span6 form-horizontal">
            <div style="text-align:center">
                <input type="button" class="btn btn-primary" value="Ok" data-dismiss="modal" style="margin-bottom: 4px" />
            </div>
        </div>
    </div>
</div>
</div>
</div>
<div style="text-align: center">
    <?php if ($this->isMasterDeviceAdministrator && $this->masterDevice instanceof Proposalgen_Model_MasterDevice && $this->masterDevice->isSystemDevice == 0)
    {
        ?>
        <input type="button" class="btn btn-success" value="Save and Approve" id="btnSaveAndApprove" />
    <?php
    }
    ?>
    <br />
    <input type="button" class="btn btn-primary" value="Save" id="btnSaveChanges" />
    <input type="button" class="btn" value="Close" data-dismiss='modal'" />
</div>