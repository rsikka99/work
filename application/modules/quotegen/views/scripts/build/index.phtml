<?php $quote = $this->quote; /* @var $quote Quotegen_Model_Quote */ ?>
<?php echo $this->render('_partials/quoteHeading.phtml'); ?>
<div class="page-header">
    <h1>Quote <small>- Build</small></h1>
</div>
<div class="row">
    <div class="span3">
        <div class="well">
            <p>Span 3</p>
        </div>
    </div>
    <div class="span3">
        <div class="well">
            <p>Span 3</p>
        </div>
    </div>
    <div class="span3">
        <div class="well">
            <p>Span 3</p>
        </div>
    </div>
    <div class="span3">
        <div class="well">
            <p>Span 3</p>
        </div>
    </div>
</div>
<h1>Summary (TODO: Make Dynamic List)</h1>
<div class="well">
    <div class="pull-right">
        <a href="<?php echo $this->url(array('action' => 'sync-all-device-configurations')); ?>" title="Sync all configurations with current information." class="btn btn-mini btn-info "><i class="icon-refresh"></i> Sync All Devices</a>
    </div>
    <form class="form-inline" method="POST">
        <div class="control-group">
            <div class="controls">
                <select name="deviceConfigurationId">
                    <option value="-1">Add New Configuration</option>
                    <option value="1">Favorite 1</option>
                    <option value="2">Favorite 2</option>
                    <option value="3">Favorite 3</option>
                </select>
                <button type="submit" name="submit" class="btn">Add</button>
            </div>
        </div>
    </form>
    
    <div class="accordion" id="accordion2">
        <?php foreach ($quote->getQuoteDevices() as $quoteDevice) : /* @var $quoteDevice Quotegen_Model_QuoteDevice */ ?>
        <div class="accordion-group">
            <div class="accordion-heading">
                <div class="accordion-buttons pull-right">
                    <a href="<?php echo $this->url(array('action' => 'sync-device-configuration', 'id' => $quoteDevice->getDeviceConfiguration()->getId())); ?>" title="Sync Configuration with current information." class="btn btn-mini btn-info "><i class="icon-refresh"></i></a>
                    <a href="<?php echo $this->url(array('action' => 'edit-device-configuration', 'id' => $quoteDevice->getDeviceConfiguration()->getId())); ?>" title="Edit Configuration" class="btn btn-mini btn-warning "><i class="icon-pencil"></i></a>
                    <a href="<?php echo $this->url(array('action' => 'delete-device-configuration', 'id' => $quoteDevice->getDeviceConfiguration()->getId())); ?>" title="Remove Configuration" class="btn btn-mini btn-danger "><i class="icon-trash"></i></a>
                </div>
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse<?php echo $quoteDevice->getId(); ?>"><?php echo $quoteDevice->getName(); ?> - (Quantity: <?php echo $quoteDevice->getQuantity(); ?>) - (Price: <?php echo $this->currency($quoteDevice->getPrice()); ?>)</a>
            </div>
            <div id="collapse<?php echo $quoteDevice->getId(); ?>" class="accordion-body collapse">
                <div class="accordion-inner">
                    <h4>Selected Options</h4>
                    <table class="table table-condensed table-bordered">
                        <tr><th>Option</th><th style='width: 50px'>Incl. Qty</th><th style='width: 50px'>Extra Qty</th><th style='width: 150px'>Price</th></tr>
                        <?php foreach ($quoteDevice->getOptions() as $option) : /* @var $option Quotegen_Model_QuoteDeviceOption */ ?>
                        <tr><td><?php echo $option->getName(); ?></td><td><?php echo $option->getIncludedQuantity(); ?></td><td><?php echo $option->getQuantity(); ?></td><td><?php echo $this->currency((int)$option->getPrice()); ?> ea</td></tr>
                        <?php endforeach; ?>
                    </table>
                    <ul>
                        <li>10,000 Monochrome Pages Per Month for $300</li>
                        <li>Monochrome Overage $0.02/page</li>
                        <li>10,000 Color Pages Per Month for $20</li>
                        <li>Color Overage $0.02/page</li>
                    </ul>
                </div>
            </div>
        </div>
        <?php endforeach; ?>
    </div>
</div>
<h2>Quote Var Dump (DEBUG DATA!!!!)</h2>
<div class="accordion" id="accordion3">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseDebug1">Quote Devices vardump</a>
        </div>
        <div id="collapseDebug1" class="accordion-body collapse">
            <div class="accordion-inner">
                <pre><?php var_dump($this->quote->getQuoteDevices()); ?></pre>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseDebug2">Quote Vardump</a>
        </div>
        <div id="collapseDebug2" class="accordion-body collapse">
            <div class="accordion-inner">
                <pre><?php var_dump($this->quote); ?></pre>
            </div>
        </div>
    </div>
</div>




